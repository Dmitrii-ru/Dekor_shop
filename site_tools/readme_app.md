# Загрузка каталога 
## `upload_catalog.py`

## Парсинг каталога
### `temp_catalog(catalog_db)`

##### kwargs: catalog_db = каталог
- Проверка на нужное содержание Excel (колонки). +
- Парсинг каталога, построение fk. +
- Подготовка данных для работы с каталогом и ассортимента сайта.+
##### return:  Данные каталога 
___

## Работа с данными из парсинга и базы данных
### `create_site_catalog(catalog)`
##### kwargs: catalog = Данные каталога 
- Загрузка новых объектов. +
- **Обновление старых позиций.**
  - !!! Проверка нового имени для сайта. -
  - Исключение из акций, новая цена > старой. +
  - В архив, если объекта нет в новом каталоге. +
  - Возврат из архива, если объект в архиве, но есть в новом каталоге. +
- **Сбор данных для отчета по загрузки каталога. +**  
    - True/False архив. + 
    - Рекомендации товаров к акциям. +
    - Новые позиции. +
    

##### return: Отчет по загруженным данным 
___

## Транзакция загрузки каталога + Celery
### `load_catalog_on_site()`
- !!! Резервное копирование данных ассортимента магазина. -
- Отработка исключений. +
- Поэтапная загрузка. +
- Сохранение отчета загрузки каталога. +
- Удаление каталога. +
___